# aozorabot

aozorabot はslackの上で動くBotの試作です。 [Hubot](http://hubot.github.com) を使って作られています。

### 使い方

1. Botを動かしたいチャネルで@aotan を招待します。軽く試してみたい方は [#bot-test](https://aozorahack.slack.com/messages/bot-test/) へどうぞ。
2. aotan <コマンド> と打つと返事を返してくれると思います。

### 現在実装されているコマンド

#### `aotan new` <数字>
最新から<数字>番目の作品へのリンクを表示します。<数字>を省略した時には最新を取ってきます。

#### `aotan book` <書名>
<書名>を含む作品を検索します。複数ある場合には書名のリストだけを返します。一つだけマッチした時には作品へのリンクを返します。

### 現在わかっている問題点

* `new`コマンドは「最初から<数値>分取ってきて、その最後を返す」という実装になっています。そのため、数値が大きくなるに従ってレスポンスが遅くなります;-) 改善にはpubserver側の改修が必要になります。
* `book`コマンドで、ある書名と同じ文字列を含む書名の本があった場合、その本のリンクが取れません。例えば、谷崎さんの「刺青」という作品がありますが、 「刺青殺人事件」を評す」という別の作品があるため、必ず複数マッチしてしまいます。解決するためには、pubserverの検索APIの仕様を変えるしか無いかなと思います。つまり、文字列を渡した場合はそのまま検索、/文字列/という風に渡した場合には正規表現マッチング、とか。
* HubotがCoffeeScriptで書かれていたので、APIを叩く部分もCoffeeScriptで書いてしまいました。そのため、残念ながらHackathonで作った [aozora-cli](https://github.com/aozorahack/aozora-cli) は使わずに実装されています...
